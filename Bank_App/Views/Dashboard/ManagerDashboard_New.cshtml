@using BankApp.Services
@using DB
@{
    ViewBag.Title = "Manager Dashboard";
    Layout = "~/Views/Shared/Template.cshtml";
}

<style>
    :root {
        --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        --danger-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        --warning-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        --info-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }

    body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
    }

    .dashboard-header {
        background: var(--danger-gradient);
        border-radius: 15px;
        padding: 2rem;
        color: white;
        box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        margin-bottom: 2rem;
    }

    .stat-card {
        background: white;
        border-radius: 15px;
        padding: 1.5rem;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        border: none;
        height: 100%;
    }

    .stat-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    }

    .stat-icon {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        margin: 0 auto 1rem;
    }

    .stat-icon.employees {
        background: var(--danger-gradient);
    }

    .stat-icon.customers {
        background: var(--success-gradient);
    }

    .stat-icon.accounts {
        background: var(--info-gradient);
    }

    .nav-tabs {
        border: none;
        background: white;
        border-radius: 15px 15px 0 0;
        padding: 1rem 1rem 0;
    }

    .nav-tabs .nav-link {
        border: none;
        color: #6c757d;
        font-weight: 600;
        padding: 1rem 1.5rem;
        border-radius: 10px 10px 0 0;
        transition: all 0.3s ease;
    }

    .nav-tabs .nav-link:hover {
        background: #f8f9fa;
        color: #667eea;
    }

    .nav-tabs .nav-link.active {
        background: var(--primary-gradient);
        color: white;
    }

    .tab-content {
        background: white;
        border-radius: 0 0 15px 15px;
        padding: 2rem;
        box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }

    .nav-pills .nav-link {
        border-radius: 10px;
        padding: 0.75rem 1.5rem;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .nav-pills .nav-link:hover {
        background: #f8f9fa;
    }

    .nav-pills .nav-link.active {
        background: var(--primary-gradient);
    }

    .form-control, .form-select {
        border-radius: 10px;
        border: 2px solid #e9ecef;
        padding: 0.75rem 1rem;
        transition: all 0.3s ease;
    }

    .form-control:focus, .form-select:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
    }

    .btn {
        border-radius: 10px;
        padding: 0.75rem 2rem;
        font-weight: 600;
        transition: all 0.3s ease;
        border: none;
    }

    .btn-primary {
        background: var(--primary-gradient);
    }

    .btn-success {
        background: var(--success-gradient);
    }

    .btn-danger {
        background: var(--danger-gradient);
    }

    .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 7px 20px rgba(0,0,0,0.2);
    }

    .alert {
        border-radius: 10px;
        border: none;
        box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }

    .alert-info {
        background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
        color: #006064;
    }

    .table {
        border-radius: 10px;
        overflow: hidden;
    }

    .table thead {
        background: var(--primary-gradient);
        color: white;
    }

    .table-hover tbody tr:hover {
        background: #f8f9fa;
        cursor: pointer;
        transform: scale(1.01);
        transition: all 0.2s ease;
    }

    .badge {
        padding: 0.5rem 1rem;
        border-radius: 10px;
        font-weight: 600;
    }

    .card {
        border-radius: 15px;
        border: none;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }

    code {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 0.3rem 0.8rem;
        border-radius: 8px;
        font-weight: 600;
    }

    .credentials-box {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        border-radius: 15px;
        padding: 1.5rem;
        margin: 1rem 0;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-in {
        animation: fadeInUp 0.6s ease;
    }
</style>

<div class="container mt-5 animate-in">
    <!-- Header -->
    <div class="dashboard-header">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h2 class="mb-2"><i class="bi bi-shield-check"></i> Manager Dashboard</h2>
                <p class="mb-0 opacity-75">Welcome back, @ViewBag.UserName!</p>
            </div>
            <div class="text-end">
                <p class="mb-1"><strong>User ID:</strong> @ViewBag.UserID</p>
                <p class="mb-1"><strong>Manager ID:</strong> @ViewBag.ReferenceID</p>
                <span class="badge bg-light text-dark">@ViewBag.Role</span>
            </div>
        </div>
    </div>

    <!-- Alerts -->
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show animate-in" role="alert">
            <i class="bi bi-check-circle-fill me-2"></i>
            <strong>Success!</strong> @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (TempData["ShowCredentials"] != null && TempData["ShowCredentials"].ToString() == "True")
    {
        <div class="credentials-box animate-in">
            <h5 class="text-primary mb-3">
                <i class="bi bi-key-fill"></i> @TempData["CredentialsTitle"]
            </h5>
            <div class="row">
                <div class="col-md-4">
                    <strong>ID:</strong> <code>@TempData["CredentialsId"]</code>
                </div>
                <div class="col-md-4">
                    <strong>Username:</strong> <code>@TempData["CredentialsUsername"]</code>
                </div>
                <div class="col-md-4">
                    <strong>Password:</strong> <code>@TempData["CredentialsPassword"]</code>
                </div>
            </div>
            <small class="text-muted mt-2 d-block">
                <i class="bi bi-exclamation-triangle"></i> Please save these credentials securely!
            </small>
        </div>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show animate-in" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <strong>Error!</strong> @TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    <!-- Statistics Cards -->
    <div class="row mb-4 g-4">
        <div class="col-md-4">
            <div class="stat-card">
                <div class="stat-icon employees">
                    <i class="bi bi-people text-white"></i>
                </div>
                <h3 class="text-center mb-2">@(ViewBag.EmployeeCount ?? 0)</h3>
                <p class="text-center text-muted mb-0">Total Employees</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat-card">
                <div class="stat-icon customers">
                    <i class="bi bi-person-check text-white"></i>
                </div>
                <h3 class="text-center mb-2">@(ViewBag.CustomerCount ?? 0)</h3>
                <p class="text-center text-muted mb-0">Total Customers</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat-card">
                <div class="stat-icon accounts">
                    <i class="bi bi-bank text-white"></i>
                </div>
                <h3 class="text-center mb-2">@(ViewBag.AccountCount ?? 0)</h3>
                <p class="text-center text-muted mb-0">Active Accounts</p>
            </div>
        </div>
    </div>

    <!-- Main Tabs -->
    <ul class="nav nav-tabs" id="managerTabs" role="tablist">
        <li class="nav-item">
            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#register-customer">
                <i class="bi bi-person-plus"></i> Register Customer
            </button>
        </li>
        <li class="nav-item">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#register-employee">
                <i class="bi bi-person-badge"></i> Register Employee
            </button>
        </li>
        <li class="nav-item">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#open-accounts">
                <i class="bi bi-bank2"></i> Open Accounts
            </button>
        </li>
        <li class="nav-item">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#manage-accounts">
                <i class="bi bi-folder-open"></i> Manage Accounts
            </button>
        </li>
        <li class="nav-item">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#view-lists">
                <i class="bi bi-list-ul"></i> View Lists
            </button>
        </li>
        <li class="nav-item">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#staff-mgmt">
                <i class="bi bi-gear"></i> Staff Management
            </button>
        </li>
    </ul>

    <div class="tab-content">
        <!-- REGISTER CUSTOMER TAB -->
        <div class="tab-pane fade show active" id="register-customer">
            <h5 class="mb-4"><i class="bi bi-person-plus-fill text-primary"></i> Register New Customer</h5>
            <div class="alert alert-info mb-4">
                <i class="bi bi-info-circle"></i> Customer ID and login credentials will be auto-generated
            </div>
            <form method="post" action="@Url.Action("RegisterCustomer", "Dashboard")">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-person"></i> Customer Name *</label>
                        <input name="custName" class="form-control" placeholder="Enter full name" maxlength="50" required />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-calendar"></i> Date of Birth *</label>
                        <input name="dob" type="date" class="form-control" required />
                        <small class="text-muted">Must be 18+ years old</small>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-card-text"></i> PAN Number *</label>
                        <input name="pan" class="form-control" placeholder="e.g., ABCD1234" maxlength="8" pattern="[A-Za-z]{4}[0-9]{4}" required />
                        <small class="text-muted">Format: 4 letters + 4 digits</small>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-telephone"></i> Phone Number</label>
                        <input name="phone" class="form-control" placeholder="Enter phone number" maxlength="15" />
                    </div>
                    <div class="col-12">
                        <label class="form-label"><i class="bi bi-geo-alt"></i> Address</label>
                        <textarea name="address" class="form-control" placeholder="Enter address" maxlength="100" rows="2"></textarea>
                    </div>
                </div>
                <button type="submit" class="btn btn-success mt-4">
                    <i class="bi bi-check-circle"></i> Register Customer
                </button>
            </form>
        </div>

        <!-- REGISTER EMPLOYEE TAB -->
        <div class="tab-pane fade" id="register-employee">
            <h5 class="mb-4"><i class="bi bi-person-badge-fill text-primary"></i> Register New Employee</h5>
            <div class="alert alert-info mb-4">
                <i class="bi bi-info-circle"></i> Employee ID (starts with 26) and credentials will be auto-generated
            </div>
            <form method="post" action="@Url.Action("RegisterEmployee", "Dashboard")">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-person"></i> Employee Name *</label>
                        <input name="empName" class="form-control" placeholder="Enter full name" maxlength="50" required />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-building"></i> Department *</label>
                        <select name="deptId" class="form-select" required>
                            <option value="">-- Select Department --</option>
                            <option value="DEPT01">DEPT01 - Deposit Management</option>
                            <option value="DEPT02">DEPT02 - Loan Management</option>
                            <option value="DEPT03">DEPT03 - HR Department</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-card-text"></i> PAN Number *</label>
                        <input name="pan" class="form-control" placeholder="e.g., ABCD1234" maxlength="8" pattern="[A-Za-z]{4}[0-9]{4}" required />
                        <small class="text-muted">Format: 4 letters + 4 digits</small>
                    </div>
                </div>
                <button type="submit" class="btn btn-success mt-4">
                    <i class="bi bi-check-circle"></i> Register Employee
                </button>
            </form>
        </div>

        <!-- OPEN ACCOUNTS TAB -->
        <div class="tab-pane fade" id="open-accounts">
            <h5 class="mb-4"><i class="bi bi-bank2 text-primary"></i> Open New Account</h5>
            
            <ul class="nav nav-pills mb-4">
                <li class="nav-item">
                    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#savings-account">
                        <i class="bi bi-piggy-bank"></i> Savings
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#fd-account">
                        <i class="bi bi-cash-stack"></i> Fixed Deposit
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#loan-account">
                        <i class="bi bi-credit-card"></i> Loan
                    </button>
                </li>
            </ul>

            <div class="tab-content">
                <!-- Savings Account -->
                <div class="tab-pane fade show active" id="savings-account">
                    <div class="alert alert-info">
                        <strong><i class="bi bi-info-circle"></i> Business Rules:</strong>
                        <ul class="mb-0 mt-2">
                            <li>Minimum deposit: Rs. 1,000</li>
                            <li>One account per customer</li>
                            <li>Account ID auto-generated</li>
                        </ul>
                    </div>
                    <form method="post" action="@Url.Action("OpenSavingsAccount", "Dashboard")">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Customer ID *</label>
                                <input name="customerId" class="form-control" placeholder="e.g., MLA00001" required />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Initial Deposit (Rs.) *</label>
                                <input name="initialDeposit" type="number" step="0.01" min="1000" class="form-control" required />
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary mt-3">
                            <i class="bi bi-check-circle"></i> Open Savings Account
                        </button>
                    </form>
                </div>

                <!-- Fixed Deposit -->
                <div class="tab-pane fade" id="fd-account">
                    <div class="alert alert-info">
                        <strong><i class="bi bi-info-circle"></i> Business Rules:</strong>
                        <ul class="mb-0 mt-2">
                            <li>Minimum: Rs. 10,000</li>
                            <li>Interest: 6% (?1yr), 7% (1-2yr), 8% (>2yr)</li>
                            <li>Senior citizens: +0.5% bonus</li>
                        </ul>
                    </div>
                    <form method="post" action="@Url.Action("OpenFixedDepositAccount", "Dashboard")">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Customer ID *</label>
                                <input name="customerId" class="form-control" placeholder="e.g., MLA00001" required />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Amount (Rs.) *</label>
                                <input name="amount" type="number" step="0.01" min="10000" class="form-control" required />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Start Date *</label>
                                <input name="startDate" type="date" class="form-control" required />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Tenure (Months) *</label>
                                <input name="tenureMonths" type="number" min="1" class="form-control" required />
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary mt-3">
                            <i class="bi bi-check-circle"></i> Open Fixed Deposit
                        </button>
                    </form>
                </div>

                <!-- Loan Account -->
                <div class="tab-pane fade" id="loan-account">
                    <div class="alert alert-info">
                        <strong><i class="bi bi-info-circle"></i> Business Rules:</strong>
                        <ul class="mb-0 mt-2">
                            <li>Minimum: Rs. 10,000</li>
                            <li>Interest: 10% (?5L), 9.5% (5-10L), 9% (>10L)</li>
                            <li>EMI ? 60% of salary</li>
                            <li>Senior: max Rs. 1L, 9.5%</li>
                        </ul>
                    </div>
                    <form method="post" action="@Url.Action("OpenLoanAccount", "Dashboard")">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Customer ID *</label>
                                <input name="customerId" class="form-control" placeholder="e.g., MLA00001" required />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Loan Amount (Rs.) *</label>
                                <input name="loanAmount" type="number" step="0.01" min="10000" class="form-control" required />
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Start Date *</label>
                                <input name="startDate" type="date" class="form-control" required />
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Tenure (Months) *</label>
                                <input name="tenureMonths" type="number" min="1" class="form-control" required />
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Monthly Salary (Rs.) *</label>
                                <input name="monthlySalary" type="number" step="0.01" min="1" class="form-control" required />
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary mt-3">
                            <i class="bi bi-check-circle"></i> Sanction Loan
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- MANAGE ACCOUNTS TAB -->
        <div class="tab-pane fade" id="manage-accounts">
            <h5 class="mb-4"><i class="bi bi-folder-open text-primary"></i> Manage Accounts</h5>
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Account ID</th>
                            <th>Type</th>
                            <th>Customer</th>
                            <th>Opened By</th>
                            <th>Date</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (ViewBag.Accounts != null && ((List<Account>)ViewBag.Accounts).Count > 0)
                        {
                            foreach (var account in (List<Account>)ViewBag.Accounts)
                            {
                                <tr>
                                    <td><strong>@account.AccountID</strong></td>
                                    <td>
                                        @if (account.AccountType == "SAVING")
                                        {
                                            <span class="badge bg-success">Savings</span>
                                        }
                                        else if (account.AccountType == "FIXED-DEPOSIT")
                                        {
                                            <span class="badge bg-info">FD</span>
                                        }
                                        else if (account.AccountType == "LOAN")
                                        {
                                            <span class="badge bg-warning">Loan</span>
                                        }
                                    </td>
                                    <td>@account.CustomerID</td>
                                    <td>@account.OpenedBy</td>
                                    <td>@account.OpenDate.ToString("dd/MM/yyyy")</td>
                                    <td>
                                        @if (account.Status == "OPEN")
                                        {
                                            <span class="badge bg-success">Open</span>
                                        }
                                        else
                                        {
                                            <span class="badge bg-secondary">Closed</span>
                                        }
                                    </td>
                                    <td>
                                        @if (account.Status == "OPEN")
                                        {
                                            <form method="post" action="@Url.Action("CloseAccount", "Dashboard")" style="display:inline;">
                                                <input type="hidden" name="accountId" value="@account.AccountID" />
                                                <input type="hidden" name="accountType" value="@account.AccountType" />
                                                <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Close this account?');">
                                                    <i class="bi bi-x-circle"></i> Close
                                                </button>
                                            </form>
                                        }
                                    </td>
                                </tr>
                            }
                        }
                        else
                        {
                            <tr><td colspan="7" class="text-center text-muted">No accounts found</td></tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- VIEW LISTS TAB -->
        <div class="tab-pane fade" id="view-lists">
            <h5 class="mb-4"><i class="bi bi-list-ul text-primary"></i> View Lists</h5>
            
            <ul class="nav nav-pills mb-4">
                <li class="nav-item">
                    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#customer-list">
                        <i class="bi bi-people"></i> Customers
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#employee-list">
                        <i class="bi bi-person-badge"></i> Employees
                    </button>
                </li>
            </ul>

            <div class="tab-content">
                <!-- Customer List -->
                <div class="tab-pane fade show active" id="customer-list">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>PAN</th>
                                    <th>Phone</th>
                                    <th>DOB</th>
                                    <th>Address</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (ViewBag.Customers != null && ((List<CustomerDTO>)ViewBag.Customers).Count > 0)
                                {
                                    foreach (var customer in (List<CustomerDTO>)ViewBag.Customers)
                                    {
                                        <tr>
                                            <td><strong>@customer.Custid</strong></td>
                                            <td>@customer.Custname</td>
                                            <td>@customer.Pan</td>
                                            <td>@customer.PhoneNumber</td>
                                            <td>@(customer.DOB?.ToString("dd/MM/yyyy") ?? "N/A")</td>
                                            <td>@customer.Address</td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr><td colspan="6" class="text-center text-muted">No customers found</td></tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Employee List -->
                <div class="tab-pane fade" id="employee-list">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Department</th>
                                    <th>PAN</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (ViewBag.Employees != null && ((List<EmployeeDTO>)ViewBag.Employees).Count > 0)
                                {
                                    foreach (var employee in (List<EmployeeDTO>)ViewBag.Employees)
                                    {
                                        <tr>
                                            <td><strong>@employee.Empid</strong></td>
                                            <td>@employee.EmployeeName</td>
                                            <td><span class="badge bg-primary">@employee.DeptId</span></td>
                                            <td>@employee.Pan</td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr><td colspan="4" class="text-center text-muted">No employees found</td></tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- STAFF MANAGEMENT TAB -->
        <div class="tab-pane fade" id="staff-mgmt">
            <h5 class="mb-4"><i class="bi bi-gear text-primary"></i> Staff Management</h5>
            <div class="alert alert-warning">
                <i class="bi bi-exclamation-triangle"></i> <strong>Warning:</strong> Deletion is permanent!
            </div>

            <ul class="nav nav-pills mb-4">
                <li class="nav-item">
                    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#mgmt-customers">
                        <i class="bi bi-people"></i> Customers
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#mgmt-employees">
                        <i class="bi bi-person-badge"></i> Employees
                    </button>
                </li>
            </ul>

            <div class="tab-content">
                <div class="tab-pane fade show active" id="mgmt-customers">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>PAN</th>
                                    <th>Phone</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (ViewBag.Customers != null && ((List<CustomerDTO>)ViewBag.Customers).Count > 0)
                                {
                                    foreach (var customer in (List<CustomerDTO>)ViewBag.Customers)
                                    {
                                        <tr>
                                            <td>@customer.Custid</td>
                                            <td>@customer.Custname</td>
                                            <td>@customer.Pan</td>
                                            <td>@customer.PhoneNumber</td>
                                            <td>
                                                <form method="post" action="@Url.Action("DeleteCustomer", "Dashboard")" style="display:inline;">
                                                    <input type="hidden" name="custId" value="@customer.Custid" />
                                                    <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete @customer.Custname?');">
                                                        <i class="bi bi-trash"></i> Delete
                                                    </button>
                                                </form>
                                            </td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr><td colspan="5" class="text-center text-muted">No customers</td></tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="tab-pane fade" id="mgmt-employees">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Department</th>
                                    <th>PAN</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (ViewBag.Employees != null && ((List<EmployeeDTO>)ViewBag.Employees).Count > 0)
                                {
                                    foreach (var employee in (List<EmployeeDTO>)ViewBag.Employees)
                                    {
                                        <tr>
                                            <td>@employee.Empid</td>
                                            <td>@employee.EmployeeName</td>
                                            <td>@employee.DeptId</td>
                                            <td>@employee.Pan</td>
                                            <td>
                                                <form method="post" action="@Url.Action("DeleteEmployee", "Dashboard")" style="display:inline;">
                                                    <input type="hidden" name="empId" value="@employee.Empid" />
                                                    <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete @employee.EmployeeName?');">
                                                        <i class="bi bi-trash"></i> Delete
                                                    </button>
                                                </form>
                                            </td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr><td colspan="5" class="text-center text-muted">No employees</td></tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Logout Button -->
    <div class="mt-5 text-center">
        <a href="@Url.Action("Logout", "Auth")" class="btn btn-danger btn-lg">
            <i class="bi bi-box-arrow-right"></i> Logout
        </a>
    </div>
</div>

<script>
    // Add animation to stat cards on load
    document.addEventListener('DOMContentLoaded', function() {
        const statCards = document.querySelectorAll('.stat-card');
        statCards.forEach((card, index) => {
            setTimeout(() => {
                card.style.animation = `fadeInUp 0.6s ease ${index * 0.1}s both`;
            }, 100);
        });
    });
</script>
